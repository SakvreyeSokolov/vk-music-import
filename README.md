# vk-music-import

Скрипт, позволяющий импортировать плейлисты из Spotify, а также обычные треклисты в VK Музыку.

![Untitled Diagram drawio-3](https://user-images.githubusercontent.com/15357833/161931217-9c374cf8-749a-4966-b3f5-4e8a85194572.png)

Преимущества:
- Работает в 2022 году
- Импортирует даже неточные по названию треки
- Импортирует как плейлисты из Spotify, так и текстовые списки треков (треклисты)
- Имеет доступ только к аудиозаписям
- Поддерживает большие плейлисты (более 1000 треков)
- Умеет обходить капчу

---

## Как запустить? (для обычных пользователей)

```
TODO: раздел дополняется
```

## Как запустить? (для продвинутых пользователей)

1. Убедитесь, что у вас установлен Python 3.8 или выше.
2. Установите зависимости:
   ```
   pip install -r requirements.txt
   ```
3. Запустите скрипт и следуйте инструкциям:
   ```
   python vk-music-import.py
   ```
4. После переноса треков, скрипт сгенерирует отчет и выведет ссылку на плейлист с импортированными треками.
   
## Настройки

### Режим импорта

По-умолчанию включен импорт треков из плейлиста Spotify, чтобы перейти в режим импорта из треклиста, в `.env` отключите режим Spotify: `SPOTIFY_MODE="0"`. Теперь скрипт будет искать треки из файла `tracklist.txt`, который содержит список треков, разделенных переносом, например:
```
Khalid - Better
Billie Eilish - i love you
```

### Сохранение авторизации

Чтобы при каждом запуске не запрашивать токен заново, вы можете сохранить его раз и навсегда в `.env`: `VK_TOKEN="ТВОЙ ТОКЕН"`.

Для того, чтобы получить свой токен, перейди по [данной ссылке](https://oauth.vk.com/oauth/authorize?client_id=6121396&scope=8&redirect_uri=https://oauth.vk.com/blank.html&display=page&response_type=token&revoke=1&slogin_h=23a7bd142d757e24f9.93b0910a902d50e507&__q_hash=fed6a6c326a5673ad33facaf442b3991), нажми "Разрешить" и скопируй из адресной строки браузера часть, отвечающую за токен: например, если у тебя ссылка `https://oauth.vk.com/blank.html#access_token=ABCDEF123&expires_in=86400&user_id=12345`, тогда твой токен будет `ABCDEF123`.

## Возможные проблемы и их решения

### Обход капчи не работает на macOS на M1

Это происходит из-за проблем с установкой onnx-runtime.

- **Решение 1**: отключить распознавание капчи и вводить ответы вручную. Для этого закомментируйте строчку импорта `import vk_captchasolver as vc` в `vk-music-import.py` и выключите распознавание капчи в файле `.env`: `BYPASS_CAPTCHA="1"`.
- **Решение 2**: запустите скрипт через Python x64 с помощью Rosetta (метод не проверен).

## Условия пользования

Автор не несет ответственности за любые действия, которые предпринимаете с данным ПО, вы делаете всё на свой страх и риск.
Учитывайте, что данный метод импортирования музыки не является официальным, но банов за его использования пока **не было**.
