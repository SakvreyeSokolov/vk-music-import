# vk-music-import

Программа для переноса плейлистов из Spotify и текстовых треклистов в VK Музыку.

![Untitled Diagram drawio-3](https://user-images.githubusercontent.com/15357833/161931217-9c374cf8-749a-4966-b3f5-4e8a85194572.png)

Преимущества:
- **Позволяет быстро импортировать плейлисты из Spotify в VK Музыку**
- Импортирует даже неточные по названию треки
- Имеет доступ только к аудиозаписям, данные никуда не "утекают"
- Поддерживает большие плейлисты (более 1000 треков)
- Позволяет импортировать также обычные текстовые списки треков в VK Музыку
- Умеет обходить капчу

---

## Как запустить? (для обычных пользователей)

Инструкция по использованию на Windows:
- Скачайте и распакуйте архив ([**vk-music-import_win32.zip**](https://github.com/mewforest/vk-music-import/releases/download/0.1/vk-music-import_win32.zip)) в любую папку
- Запустите исполняемый файл и следуйте инструкциям:

![2022-04-08_12h22_59](https://user-images.githubusercontent.com/15357833/162406868-14b4a26f-48c9-431a-8295-4e21bad45f4b.png)

## Как запустить? (для продвинутых пользователей)

1. Убедитесь, что у вас установлен Python 3.8 или выше.
2. Установите зависимости:
   ```
   pip install -r requirements.txt
   ```
3. Запустите скрипт и следуйте инструкциям:
   ```
   python vk-music-import.py
   ```
4. После переноса треков, скрипт сгенерирует отчет и выведет ссылку на плейлист с импортированными треками.
   
## Настройки

### Режим импорта

По-умолчанию включен импорт треков из плейлиста Spotify, чтобы перейти в режим импорта из треклиста, в `.env` отключите режим Spotify: `SPOTIFY_MODE="0"`. Теперь скрипт будет искать треки из файла `tracklist.txt` (его нужно создать самостоятельно в папке со скриптом), который должен содержать список треков, разделенных переносом, например:
```
Khalid - Better
Billie Eilish - i love you
```

## Возможные проблемы и их решения

### Обход капчи не работает на macOS на M1

Это происходит из-за проблем с установкой onnx-runtime.

- **Решение 1**: запустите скрипт через Python x64 с помощью Rosetta.
- **Решение 2**: отключить распознавание капчи и вводить ответы вручную. Для этого закомментируйте строчку импорта `import onnxruntime as rt` в `vk-music-import.py` и выключите распознавание капчи в файле `.env`: `BYPASS_CAPTCHA="0"`.

## Компиляция программы

Вы можете скомпилировать данную утилиту самостоятельно, в том числе для своей операционной системы.

- Установите Pyinstaller: `pip install pyinstaller`
- Запустите компиляцию:
  ```
  pyinstaller --onefile --icon=app.ico --add-binary="venv\Lib\site-packages\onnxruntime\capi\onnxruntime_providers_shared.dll;.\onnxruntime\capi" .\vk-music-import.py
  ```
- Скопируйте в папку `dist` файл с моделями капчи.


## Дополнительный материал

- [Spotya](https://spotya.ru/) - сервис для переноса музыки из Spotify в Яндекс Музыку, некоторые метаданные о плейлистах я собираю с его API.
- [vkCaptchaBreaker](https://github.com/Defasium/vkCaptchaBreaker/) - модель для решения капчи ВК взята из данного репозитория

## Условия пользования

Автор не несет ответственности за любые действия, которые предпринимаете с данным ПО, вы делаете всё на свой страх и риск.
Учитывайте, что данный метод импортирования музыки не является официальным, но банов за его использования пока не было.
